# Running Hi Backend
<div align="center">
<h2>[2024] RunningHi - Backend π®</h2>
</div>

RunningHiλ” λ¦¬μ•΅νΈ κΈ°λ° μ›Ή μ„λΉ„μ¤λ΅, μ‚¬μ©μκ°€ μ§€λ„ μ„μ— λ§μ»¤λ¥Ό λ“±λ΅ν•μ—¬ λ¬λ‹ μ½”μ¤λ¥Ό λ§λ“¤κ³  μ΄λ¥Ό λ‹¤λ¥Έ μ‚¬μ©μμ™€ κ³µμ ν•  μ μλ” κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤. μ΄ ν”„λ΅μ νΈλ” μ½”λ“λ© AICC 3κΈ° 1μ°¨ ν€ ν”„λ΅μ νΈλ΅ μ§„ν–‰λμ—μΌλ©°, Runnect ν”„λ΅μ νΈλ¥Ό μ°Έκ³ ν•μ—¬ μ μ‘λμ—μµλ‹λ‹¤.  

- μ°Έκ³  ν”„λ΅μ νΈ: [Runnect](https://github.com/Runnect/Runnect-Android) π€  
- Frontend Repository: [RunningHi Frontend](https://github.com/Noveled/runninghi-frontend-cicd)  

## λ©μ°¨
- [ν”„λ΅μ νΈ κ°μ”](#ν”„λ΅μ νΈ-κ°μ”)
- [κΈ°λ¥ μ„¤λ…](#κΈ°λ¥-μ„¤λ…)
- [μ£Όμ” μ—”λ“ν¬μΈνΈ](#μ£Όμ”-μ—”λ“ν¬μΈνΈ)
- [CI/CD ν”λ΅μ° μ°¨νΈ](#ci-cd-ν”λ΅μ°-μ°¨νΈ)
- [μ¤λ¥ λ³΄κ³ ](#μ¤λ¥-λ³΄κ³ )
- [λ νΌλ°μ¤](#λ νΌλ°μ¤)

---

## ν”„λ΅μ νΈ κ°μ”
- **ν”„λ΅μ νΈ μ΄λ¦„**: RunningHi - Backend
- **ν”„λ΅μ νΈ κΈ°κ°„**: 2024.08.20 - 2024.09.20
- **μ‚¬μ© κΈ°μ **: `Node.js`, `PostgreSQL`
- **ν€ κµ¬μ„±**: κΉ€λ―Όμ‹(ν€μ¥), κ°•λ―Όμ£Ό, μ†μ£Όν„
- **Demo Link**: [RunningHi Backend](https://runninghibackend.siinat.com/)
- **Architecture**:
![λ°±μ—”λ“ μ•„ν‚¤ν…μ²](https://github.com/Noveled/runninghi-frontend-cicd/blob/main/src/assets/images/Recommend_001.PNG)
μ„ κ·Έλ¦Όμ€ λ°±μ—”λ“μ μ „μ²΄μ μΈ κµ¬μ΅°λ¥Ό λ³΄μ—¬μ£Όλ©°, λ°°ν¬μ™€ CI/CD κΈ°λ¥κΉμ§€ ν¬ν•¨λ BackEnd μ•„ν‚¤ν…μ²λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.

---

## κΈ°λ¥ μ„¤λ…
RunningHi Backendλ” λ‹¤μκ³Ό κ°™μ€ μ£Όμ” κΈ°λ¥λ“¤μ„ APIλ΅ μ κ³µν•©λ‹λ‹¤:

|![μ½”μ¤ μ •λ³΄ μ”μ²­ ν™”λ©΄](https://github.com/Noveled/runninghi-frontend-cicd/blob/main/src/assets/images/Recommend_001.PNG)|![μ½”μ¤ μ •λ³΄ μ”μ²­ ν™”λ©΄](https://github.com/Noveled/runninghi-frontend-cicd/blob/main/src/assets/images/Recommend_001.PNG)|
|:---:|:---:|
|**λ©”μΈ ν™”λ©΄**|**μ½”μ¤ μ •λ³΄ μ”μ²­ ν™”λ©΄**|

1. **μ½”μ¤ μ •λ³΄ μ”μ²­** β”οΈ  
   - μ½”μ¤λ…, μ΄κ±°λ¦¬, λ“±λ΅μ μ •λ³΄ λ“± κΈ°λ³Έμ μΈ CRUD κΈ°λ¥μ„ μ§€μ›ν•©λ‹λ‹¤.

2. **μ μ € μ •λ³΄ μ”μ²­** π―  
   - μ‚¬μ©μ μ•„μ΄λ””, λΉ„λ°€λ²νΈ, ν”„λ΅ν•„ μ‚¬μ§„ λ“± κΈ°λ³Έμ μΈ μ μ € μ •λ³΄λ¥Ό λ‹¤λ£Ήλ‹λ‹¤.

3. **νΈμμ‹μ„¤ μ •λ³΄ μ”μ²­** π―  
   - μ‹μ„¤λ³„ μ„μΉ μ •λ³΄ λ° μ‹μ„¤ νƒ€μ… μ΅°νλ¥Ό μ κ³µν•©λ‹λ‹¤.

4. **μ΄λ―Έμ§€ κ΄€λ¦¬**  
   - μ μ € ν”„λ΅ν•„ λ° μ½”μ¤ μ„¤λ… μ‚¬μ§„ κ΄€λ¦¬λ¥Ό ν¨μ¨μ μΌλ΅ μ²λ¦¬ν•©λ‹λ‹¤.

5. **μ΅°νμ κ΄€λ¦¬**  
   - λ…ν™•ν• μ΅°νμ κ΄€λ¦¬λ¥Ό μ„ν• κΈ°λ¥μΌλ΅, ν–¥ν›„ μΆ‹μ•„μ” κΈ°λ¥ λ“±μ— μ‘μ©ν•  μ μμµλ‹λ‹¤.

---

## μ£Όμ” μ—”λ“ν¬μΈνΈ
> **μμ„Έν• API λ…μ„Έλ” DOCS ν΄λ”μ PPTμ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.**  
> μ—¬κΈ°μ„λ” μ£Όμ” μ—”λ“ν¬μΈνΈλ¥Ό μ”μ•½ν•©λ‹λ‹¤.

### POST /course (μ½”μ¤ λ“±λ΅)
μƒλ΅μ΄ μ½”μ¤λ¥Ό λ“±λ΅ν•λ” μ”μ²­μ„ μ²λ¦¬ν•©λ‹λ‹¤. μ‚¬μ©μκ°€ μ½”μ¤λ¥Ό μƒμ„±ν•  λ• νΈμ¶λλ” APIμ λ΅μ§μ…λ‹λ‹¤.
- **HTTP λ©”μ„λ“**: `POST`
- **μ—”λ“ν¬μΈνΈ**: `/course`
- **μ”μ²­ λ³Έλ¬Έ**: JSON ν•μ‹μΌλ΅ μ½”μ¤ μ •λ³΄λ¥Ό ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤.

#### μ”μ²­ μμ‹:
```json
{
  "course_name": "City Run",
  "user_id": 123,
  "content": "A great running route through the city.",
  "distance": 5.0,
  "waypoint": [{"lat": 37.123, "lng": 127.456}],
  "city": "Seoul",
  "is_private": false,
  "url": "https://example.com/course_image.jpg",
  "center": {"lat": 37.123, "lng": 127.456},
  "level": "beginner"
}
```

#### μ”μ²­ νλΌλ―Έν„°:
- `course_name` (ν•„μ): μ½”μ¤ μ΄λ¦„
- `user_id` (ν•„μ): μ½”μ¤ λ“±λ΅ μ μ € ID
- `content` (ν•„μ): μ½”μ¤ μ„¤λ…
- `distance` (ν•„μ): μ΄ κ±°λ¦¬
- `waypoint` (ν•„μ): κ²½μ μ§€ λ©λ΅ (JSON λ°°μ—΄)
- `city` (ν•„μ): λ„μ‹ μ΄λ¦„
- `is_private` (ν•„μ): μ½”μ¤ κ³µκ° μ—¬λ¶€ (`true` or `false`)
- `url` (ν•„μ): μ½”μ¤ μ΄λ―Έμ§€ URL
- `center` (ν•„μ): μ½”μ¤ μ¤‘μ‹¬ μΆν‘
- `level` (ν•„μ): λ‚μ΄λ„ (μ΄κΈ‰, μ¤‘κΈ‰ λ“±)

#### μ‘λ‹µ μμ‹:
- **μ„±κ³µ μ‹**: `201 Created`
  ```json
  {
    "message": "Course Created Successfully"
  }
  ```

- **μ¤λ¥ μ‹**: `500 Internal Server Error`
  ```json
  {
    "error": "Error message"
  }
  ```

- **GET /course** (μ½”μ¤ μ΅°ν)  
  μ½”μ¤ μ •λ³΄λ¥Ό μ΅°νν•λ” APIμ λ΅μ§μ„ λ‹΄λ‹Ήν•©λ‹λ‹¤. μ‚¬μ©μκ°€ νΉμ • μ½”μ¤λ¥Ό μ΅°νν•κ±°λ‚ λ¨λ“  μ½”μ¤λ¥Ό μ”μ²­ν•  λ• νΈμ¶λ©λ‹λ‹¤.
  

### GET /course (μ½”μ¤ μ •λ³΄ μ΅°ν)

- **HTTP λ©”μ„λ“**: `GET`
- **μ—”λ“ν¬μΈνΈ**: `/course`
- **μΏΌλ¦¬ νλΌλ―Έν„°** (μ„ νƒ μ‚¬ν•­):
  - `userId`: νΉμ • μ‚¬μ©μκ°€ λ“±λ΅ν• μ½”μ¤λ¥Ό μ΅°νν•  λ• μ‚¬μ©
  - `isMarathon`: λ§λΌν†¤ μ½”μ¤ μ—¬λ¶€μ— λ”°λΌ ν•„ν„°λ§
  - `isVisible`: κ²€μƒ‰ κ°€λ¥ μ—¬λ¶€μ— λ”°λΌ ν•„ν„°λ§ (μ‚­μ λμ§€ μ•μ€ μ½”μ¤λ§ μ΅°ν)

#### μ”μ²­ μμ‹:
```
GET /course?userId=123&isMarathon=true&isVisible=true
```

#### μ‘λ‹µ μμ‹:
- **μ„±κ³µ μ‹**: `200 OK`
  ```json
  [
    {
      "course_id": 1,
      "user_id": 123,
      "course_name": "City Marathon",
      "total_distance": 42.195,
      "is_marathon": true,
      "is_visible": true,
      "thumbnail_id": "https://example.com/thumbnail.jpg"
    },
    ...
  ]
  ```

- **μ¤λ¥ μ‹**: `500 Internal Server Error`
  ```json
  {
    "error": "Error message"
  }
  ```



- **GET /facilities** (νΈμμ‹μ„¤ μ •λ³΄ μ΅°ν)  
  μ£Όλ³€ νΈμμ‹μ„¤ μ •λ³΄λ¥Ό κ°€μ Έμ¤λ” APIμ λ΅μ§μ…λ‹λ‹¤. μ‹μ„¤λ³„ μ„μΉμ™€ νƒ€μ… μ •λ³΄λ¥Ό λ°ν™ν•λ” κΈ°λ¥μ„ ν•©λ‹λ‹¤.
  μμ‹ μƒλµ

- **GET /user** (μ μ € μ •λ³΄ μ΅°ν)  
  νΉμ • μ μ €μ μ •λ³΄λ¥Ό μ΅°νν•λ” APIλ¥Ό μ²λ¦¬ν•©λ‹λ‹¤. μ‚¬μ©μ ν”„λ΅ν•„μ΄λ‚ κ³„μ • μ •λ³΄λ¥Ό μ”μ²­ν•  λ• μ‚¬μ©λ©λ‹λ‹¤.
  μμ‹ μƒλµ

---

## CI/CD ν”λ΅μ° μ°¨νΈ
μ½”μ¤ λ“±λ΅, μμ •, μ‚­μ μ CI/CD ν”λ΅μ°λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

**Flowchart μ΄λ―Έμ§€**  
![CICD01](https://github.com/Noveled/runninghi-frontend-cicd/blob/main/src/assets/images/Recommend_001.PNG)
![CICD02](https://github.com/Noveled/runninghi-frontend-cicd/blob/main/src/assets/images/Recommend_001.PNG)
**Flowchart μ„¤λ…**  

μμ„Έν• CI/CD κ³Όμ •μ€ [μ‹ λ‚ ν‹°μ¤ν† λ¦¬ λΈ”λ΅κ·Έ](#)μ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

---

## μ¤λ¥ λ³΄κ³ 

### ν•΄κ²° μ™„λ£
- **CORS μ—λ¬**: `cors` λ¨λ“μ„ ν™μ©ν•μ—¬ ν—μ©ν•  νμ΄μ§€μ™€ `credentials` μ—¬λ¶€λ¥Ό μ„¤μ •ν•μ€μµλ‹λ‹¤. corsλ¨λ“ ν™μ©μ‹ μ¤„λ°”κΏ λ° μ£Όμ„μ„ ν¬ν•¨ν•λ” κ²½μ° μ •μƒμ μΌλ΅ λ™μ‘ν•μ§€ μ•μ•λ”λ°, μ¤„λ°”κΏμ€ μ μ§€ν•λ μ£Όμ„μ„ μ κ±°ν•μ—¬ ν•΄κ²°λμ—μµλ‹λ‹¤.

### ν•΄κ²° λ―Έμ™„λ£
- **μ½”μ¤ μƒμ„Έλ³΄κΈ° νμ΄μ§€**: ν„μ¬ μ „μ²΄ λ°μ΄ν„°λ¥Ό μ΅°ν ν›„ `props`λ΅ λ„κ²¨μ£Όλ” λ°©μ‹μ—μ„ λ‡ κ°€μ§€ λ¬Έμ  λ°μƒ(μ: μ½”μ¤ κ³µμ , νμ΄μ§€ λ°”λ΅ μ ‘κ·Ό). μ΄λ¥Ό μ—”λ“ν¬μΈνΈλ΅ λ¶„λ¦¬ν•λ©΄ ν•΄κ²°λ  κ²ƒμΌλ΅ μμƒλ©λ‹λ‹¤.

---

## λ νΌλ°μ¤
- **Runnect**: [λ§ν¬](https://github.com/Runnect/Runnect-Android)
- **μ°Έκ³  λΈ”λ΅κ·Έ**: [λ§ν¬](#)
